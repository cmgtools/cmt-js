/**
 * CMGTools JS - v1.0.0-alpha1 - 2017-08-03
 * Description: CMGTools JS is a JavaScript library which provide utilities, ui components and MVC framework implementation for CMSGears.
 * License: GPLv3
 * Author: Bhagwat Singh Chouhan
 */

function showPopup(a){jQuery(a).fadeIn("slow")}function closePopup(a){jQuery(a).fadeOut("fast")}function showErrorPopup(a){jQuery("#popup-error .popup-content").html(a),showPopup("#popup-error")}function hideErrorPopup(){closePopup("#popup-error")}function showMessagePopup(a){jQuery("#popup-message .popup-content").html(a),showPopup("#popup-message")}function hideMessagePopup(){closePopup("#popup-message")}var cmt=cmt||{};if(cmt.utils=cmt.utils||{},cmt.utils.ajax={triggerPost:function(a,b,c){if("undefined"==typeof c&&(c=!0),c&&null!=jQuery("meta[name=csrf-token]")){var d=jQuery("meta[name=csrf-param]").attr("content"),e=jQuery("meta[name=csrf-token]").attr("content");b+="&"+d+"="+e}jQuery.post(a,b)}},cmt.utils.browser={isXhr:function(){var a=new XMLHttpRequest;return a.upload},isFileApi:function(){return window.File&&window.FileList&&window.FileReader},isFormData:function(){return!!window.FormData},isCanvas:function(){var a=document.createElement("canvas"),b=!(!a.getContext||!a.getContext("2d"));return b},isCanvasDataUrl:function(){var a=document.createElement("canvas"),b=a.toDataURL("image/png"),c=0==b.indexOf("data:image/png");return c}},cmt.utils.data={serialiseElement:function(a,b){var c=[],d=null;"undefined"==typeof b&&(b=!0),d="string"==typeof a?jQuery("#"+a).find(":input").get():a.find(":input").get(),jQuery.each(d,function(){if(this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password/i.test(this.type))){var a=jQuery(this).val();c.push(encodeURIComponent(this.name)+"="+encodeURIComponent(a))}});var e=c.join("&").replace(/%20/g,"+");if(b&&null!=jQuery("meta[name=csrf-token]")){var f=jQuery("meta[name=csrf-param]").attr("content"),g=jQuery("meta[name=csrf-token]").attr("content");e+="&"+f+"="+g}return e},elementToJson:function(a,b){var c=[],d=null;return"undefined"==typeof b&&(b=!0),d="string"==typeof a?jQuery("#"+a).find(":input").get():a.find(":input").get(),jQuery.each(d,function(){if(this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password/i.test(this.type))){var a=jQuery(this).val();c.push({name:this.name,value:a})}}),cmt.utils.data.generateJsonMap(c,b)},serialiseForm:function(a,b){var c=null;if("undefined"==typeof b&&(b=!0),c="string"==typeof a?jQuery("#"+a).serialize():a.serialize(),b&&null!=jQuery("meta[name=csrf-token]")){var d=jQuery("meta[name=csrf-param]").attr("content"),e=jQuery("meta[name=csrf-token]").attr("content");c+="&"+d+"="+e}return c},formToJson:function(a,b){var c=null;return"undefined"==typeof b&&(b=!0),c="string"==typeof a?jQuery("#"+a).serializeArray():a.serializeArray(),cmt.utils.data.generateJsonMap(c,b)},generateJsonMap:function(a,b){var c={};if(b&&null!=jQuery("meta[name=csrf-token]")){var d=jQuery("meta[name=csrf-param]").attr("content"),e=jQuery("meta[name=csrf-token]").attr("content");a.push({name:d,value:e})}return jQuery.map(a,function(a,b){var d=a.name.indexOf("[");if(d>-1){var e=c;_name=a.name.replace(/\]/gi,"").split("[");for(var b=0,f=_name.length;f>b;b++)b==f-1?e[_name[b]]?("string"==typeof e[_name[b]]&&(e[_name[b]]=[e[_name[b]]]),e[_name[b]].push(a.value)):e[_name[b]]=a.value||"":e=e[_name[b]]=e[_name[b]]||{}}else void 0!==c[a.name]?(c[a.name].push||(c[a.name]=[c[a.name]]),c[a.name].push(a.value||"")):c[a.name]=a.value||""}),c},appendCsrf:function(a){if(null!=jQuery("meta[name=csrf-token]")){var b=jQuery("meta[name=csrf-param]").attr("content"),c=jQuery("meta[name=csrf-token]").attr("content");a=a+"&"+b+"="+c}return a},getParameterByName:function(a,b){b||(b=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null},updateUrlParam:function(a,b,c){var d,e,f="",g=jQuery("<a />").attr("href",a)[0],h=/\+/g,i=/([^&=]+)=?([^&]*)/g,j=function(a){return decodeURIComponent(a.replace(h," "))},k=g.search.substring(1);for(d={};e=i.exec(k);)d[j(e[1])]=j(e[2]);if(b||c){if(b&&!c)return d[b];d[b]=c;var l=[];for(var m in d)l.push(encodeURIComponent(m)+"="+encodeURIComponent(d[m]));return l.length>0&&(f="?"+l.join("&")),g.origin+g.pathname+f}return d},removeParam:function(a,b){var c=a.split("?")[0],d=null,e=[],f=-1!==a.indexOf("?")?a.split("?")[1]:"";if(""!==f){e=f.split("&");for(var g=e.length-1;g>=0;g-=1)d=e[g].split("=")[0],d===b&&e.splice(g,1);c=c+"?"+e.join("&")}return"?"==c.slice(-1)&&(c=c.slice(0,-1)),c},refreshGrid:function(){var a=window.location.href;a=cmt.utils.data.removeParam(a,"page"),a=cmt.utils.data.removeParam(a,"per-page"),window.location=a}},Function.prototype.inherits=function(a){var b=0,c=this.prototype=new a;this.prototype.uber=function(d){var e,f,g=b,h=a.prototype;if(g){for(;g;)h=h.constructor.prototype,g-=1;e=h[d]}else e=c[d],e==this[d]&&(e=h[d]);return b+=1,f=e.apply(this,Array.prototype.slice.apply(arguments,[1])),b-=1,f}},"#_=_"==window.location.hash)if(history.replaceState){var cleanHref=window.location.href.split("#")[0];history.replaceState(null,null,cleanHref)}else window.location.hash="";cmt.utils.image={arDimensions:function(a,b,c){var d=0,e=a.width,f=a.height;return e>b&&(d=b/e,f*=d,e*=d),f>c&&(d=c/f,e*=d),new Array(e,f)},drawAtCanvasCenter:function(a,b){if(null!=a&&null!=b){var c=a.width,d=a.height,e=a.getContext("2d"),f=new Image,g=window.URL||window.webkitURL,h=g.createObjectURL(b);f.src=h,f.onload=function(){var a=cmt.utils.image.arDimensions(f,c,d);e.translate(c/2,d/2),e.drawImage(f,-(a[0]/2),-(a[1]/2),a[0],a[1]),e.translate(-(c/2),-(d/2)),g.revokeObjectURL(h)}}}},cmt.utils.object={strToObject:function(a){for(var b=a.split("."),c=window||this,d=0,e=b.length;e>d;d++)c=c[b[d]];var f=new c;if("object"!=typeof f)throw new Error(a+" not found");return f},hasProperty:function(a,b){var c=a.__proto__||a.constructor.prototype;return b in a&&(!(b in c)||c[b]!==a[b])}},cmt.utils.ui={alignMiddle:function(a,b){var a=jQuery(a),b=jQuery(b),c=a.height(),d=a.width(),e=b.height(),f=b.width();if(c>=e&&d>=f){var g=(c-e)/2,h=(d-f)/2;b.css({position:"absolute",top:g,left:h})}}},function(a){a.fn.cmtAutoFill=function(b){function c(a){a.find(".auto-fill-text").blur(function(){var a=jQuery(this).closest(".wrap-fill");a.find(".wrap-auto-list").slideUp(),a.find(".fill-clear").val("")})}var d=(a.extend({},a.fn.cmtAutoFill.defaults,b),this);d.each(function(){var b=a(this);c(b)})},a.fn.cmtAutoFill.defaults={}}(jQuery),function(a){a.fn.cmtBlock=function(b){function c(b){if(a.inArray(b.attr("id"),i)>=0){var c=h[b.attr("id")],d=c.height,f=c.fullHeight,j=c.halfHeight,k=c.heightAuto,l=c.heightAutoMobile,m=c.heightAutoMobileWidth,n=c.css;if(null!=d&&d&&b.css({height:d+"px"}),null!=k&&k&&(null!=d&&d?b.css({height:"auto","min-height":d+"px"}):null!=f&&f?b.css({height:"auto","min-height":g+"px"}):null!=j&&j?b.css({height:"auto","min-height":g/2+"px"}):b.css({height:"auto"})),null==d&&null==k&&null!=f&&f&&b.css({height:g+"px"}),null==d&&null==k&&null!=j&&j&&b.css({height:g/2+"px"}),null!=l&&l&&window.innerWidth<=m){b.css({height:"auto","min-height":g+"px"});var o=b.children(".block-content-wrap");o.hasClass("valign-center")&&o.removeClass("valign-center")}var o=b.find(".block-content-wrap"),p=b.find(".block-content");if(void 0!==p&&p.height()>o.height()){var q=p.height()+100+"px",r=p.height()-o.height();o.height(q),q=b.height()+r+100+"px",b.height(q)}null!=n&&n&&b.css(n)}else e.fullHeight&&(e.heightAuto?b.css({height:"auto","min-height":g+"px"}):b.css({height:g+"px"})),e.halfHeight&&(e.heightAuto?b.css({height:"auto","min-height":g/2+"px"}):b.css({height:g/2+"px"}))}function d(){var b=a(window).height(),c=a(window).scrollTop(),d=c+b,e=c+b/2;f.each(function(f){var g=a(this),h=g.height(),i=g.offset().top,j=i+h,k=g.children(".block-bkg-parallax");if(null!=k&&k.length>0&&d>i&&j>c){var l=(k.width(),k.height()),m=0,n=l-.5*b,o=b>h?l-h:l-b;i-=o,j+=o;var p=m+(n-m)*(e-i)/(j-i);k.css("background-position","50% "+p+"px")}})}var e=a.extend({},a.fn.cmtBlock.defaults,b),f=this,g=a(window).height(),h=(a(window).width(),e.blocks),i=Object.keys(h);f.each(function(){var b=a(this);c(b)}),e.backgroundParallax&&a(window).scroll(d)},a.fn.cmtBlock.defaults={fullHeight:!0,halfHeight:!1,heightAuto:!1,backgroundParallax:!0,blocks:{}}}(jQuery),function(a){a.fn.cmtCheckbox=function(b){function c(a){if(!a.is("[disabled]")){var b=a.find("input[type='checkbox']"),c=a.find("input[type='hidden']");1==c.val()&&(b.prop("checked",!0),b.val(1)),b.change(function(){b.is(":checked")?(c.val(1),b.val(1)):(c.val(0),b.val(0))})}}var d=(a.extend({},a.fn.cmtCheckbox.defaults,b),this);d.each(function(){var b=a(this);c(b)})},a.fn.cmtCheckbox.defaults={}}(jQuery),function(a){a.fn.cmtFileUploader=function(b){function c(a){var b=a.find(".btn-chooser");if(b.length>0&&((k.direct||a.hasClass("file-uploader-direct"))&&(a.addClass("file-uploader-direct"),b.hide(),a.find(".chooser-wrap").show(),a.find(".file-wrap").hide()),b.click(function(){a.find(".chooser-wrap").fadeToggle("slow"),a.find(".file-wrap").fadeToggle("fast"),a.find(".post-action").hide(),a.find(".file-chooser .input").val(""),d(a)})),cmt.utils.browser.isFileApi()){var c=a.find(".file-chooser .input");c.change(function(b){f(b,a)});var g=a.find(".file-dragger .drag-wrap");g.bind("dragover",function(a){e(a)}),g.bind("dragleave",function(a){e(a)}),g.bind("drop",function(b){f(b,a)})}else if(cmt.utils.browser.isFormData()){var i=a.attr("directory"),j=a.attr("type"),c=a.find(".file-chooser .input");c.change(function(b){h(a,i,j)})}}function d(a){if(cmt.utils.browser.isCanvas()&&"image"==a.attr("type")){var b=a.find(".file-dragger canvas")[0],c=b.getContext("2d");c.clearRect(0,0,b.width,b.height)}var d=a.find(".file-preloader .file-preloader-bar");cmt.utils.browser.isFileApi()?d.css("width","0%"):cmt.utils.browser.isFormData()&&d.html("")}function e(a){a.stopPropagation(),a.preventDefault()}function f(a,b){var c=b.attr("directory"),d=b.attr("type");e(a);var f=a.target.files||a.originalEvent.dataTransfer.files;if(k.preview&&cmt.utils.browser.isCanvas()&&"image"==d){var h=b.find(".file-dragger canvas");h.show(),cmt.utils.image.drawAtCanvasCenter(h[0],f[0])}g(b,c,d,f[0])}function g(a,b,c,e){var f=new XMLHttpRequest,g=e.type.toLowerCase(),h=jQuery.inArray(g,k.fileFormats),j=a.find(".file-preloader .file-preloader-bar"),l=new FormData;if(l.append("file",e),j.css("width","0%"),f.upload&&h){f.upload.onprogress=function(a){if(a.lengthComputable){var b=Math.round(100*a.loaded/a.total);j.css("width",b+"%")}},f.onreadystatechange=function(e){if(4==f.readyState&&200==f.status){var g=JSON.parse(f.responseText);if(1==g.result){var h=g.data;k.uploadListener?k.uploadListener(a,b,c,h):i(a,b,c,h)}else{var h=g.errors;alert(h.error)}d(a)}};var m=fileUploadUrl+"?directory="+encodeURIComponent(b)+"&type="+encodeURIComponent(c);f.open("POST",m,!0),f.send(l)}else alert("File format not allowed.")}function h(a,b,c){var e=a.find(".file-preloader .file-preloader-bar"),f=a.find(".file-chooser .input"),g=f.files[0],h=new FormData;fileName=g.name,e.html("Uploading file"),h.append("file",g);var j=fileUploadUrl+"?directory="+encodeURIComponent(b)+"&type="+encodeURIComponent(c);jQuery.ajax({type:"POST",url:j,data:h,cache:!1,contentType:!1,processData:!1,dataType:"json"}).done(function(e){if(progress.html("File uploaded"),1==e.result)k.uploadListener?k.uploadListener(a,b,c,e.data):i(a,b,c,e.data);else{var f=e.errors;alert(f.error)}d(a)})}function i(a,b,c,d){d.name+"."+d.extension;switch(c){case"image":a.find(".file-wrap .file-data").html("<img src='"+d.tempUrl+"' class='fluid' />"),j(a,d);break;case"video":a.find(".file-wrap .file-data").html("<video src='"+d.tempUrl+"' controls class='fluid'>Video not supported.</video>"),j(a,d);break;case"document":case"compressed":case"shared":a.find(".file-wrap .file-data").html("<i class='cmti cmti-3x cmti-check'></i>"),j(a,d)}a.find(".chooser-wrap").fadeToggle("fast"),a.find(".file-wrap").fadeToggle("slow"),a.find(".post-action").fadeIn()}function j(a,b){var c=a.find(".file-info"),d=a.find(".file-fields");c.find(".name").val(b.name),c.find(".extension").val(b.extension),c.find(".change").val(1),d.find(".title").val(b.title)}var k=a.extend({},a.fn.cmtFileUploader.defaults,b),l=this;l.each(function(){var b=a(this);c(b)})},a.fn.cmtFileUploader.defaults={fileFormats:["jpg","jpeg","png","gif","pdf","csv"],direct:!1,uploadListener:null,preview:!0}}(jQuery),function(a){a.fn.cmtFormInfo=function(b){function c(a){a.find(".box-form-trigger").click(function(){var a=jQuery(this).closest(".box-form"),b=a.find(".box-form-info-wrap"),c=a.find(".box-form-content-wrap");b.is(":visible")?(b.hide(),c.fadeIn("slow")):(b.fadeIn("fast"),c.hide())})}var d=(a.extend({},a.fn.cmtFormInfo.defaults,b),this);d.each(function(){var b=a(this);c(b)})},a.fn.cmtFormInfo.defaults={}}(jQuery),function(a){a.fn.cmtGrid=function(b){function c(a){a.find(".grid-sort select").change(function(){var a=window.location.href,b=jQuery(this).val(),c=jQuery(this).find(":selected").attr("data-sort");a="select"===b?cmt.utils.data.removeParam(a,"sort"):cmt.utils.data.updateUrlParam(a,"sort",c),window.location=a}),a.find(".grid-filters select").change(function(){var a=window.location.href,b=jQuery(this).val(),c=jQuery(this).find(":selected"),d=c.attr("data-col"),e=jQuery(this).closest(".grid-filters").attr("data-cols");for(e=e.split(","),i=0;i<e.length;i++)a=cmt.utils.data.removeParam(a,e[i]);"select"!==b&&(a=cmt.utils.data.updateUrlParam(a,d,b)),window.location=a}),a.find(".trigger-report-toggle").click(function(){a.find(".grid-report-wrap").fadeToggle("slow"),jQuery(this).toggleClass("active")}),a.find(".trigger-report-generate").click(function(){var a=window.location.href,b=jQuery(this).closest(".grid-data"),c=b.find(".grid-report"),d=c.find(".report-field");d.each(function(b,c){var d=jQuery(this);a=cmt.utils.data.removeParam(a,d.attr("name")),d.val().length>0&&(a=cmt.utils.data.updateUrlParam(a,d.attr("name"),d.val()))}),a=cmt.utils.data.updateUrlParam(a,"report",1),window.location=a}),a.find(".trigger-report-clear").click(function(){var a=window.location.href,b=jQuery(this).closest(".grid-data"),c=b.find(".grid-report"),d=c.find(".report-field");d.each(function(b,c){var d=jQuery(this);d.val(""),a=cmt.utils.data.removeParam(a,d.attr("name"))}),a=cmt.utils.data.removeParam(a,"report"),window.location=a}),a.find(".search-field .trigger-search").click(function(){var a=window.location.href,b=jQuery(this).closest(".grid-data"),c=b.find(".search-field input[name=keywords]").val(),d=b.find(".search-field select").val();0==c.length||"select"===d?(a=cmt.utils.data.removeParam(a,"keywords"),a=cmt.utils.data.removeParam(a,"search")):(a=cmt.utils.data.updateUrlParam(a,"search",d),a=cmt.utils.data.updateUrlParam(a,"keywords",c)),window.location=a}),a.find(".grid-bulk-all").change(function(){jQuery(this).is(":checked")?a.find(".grid-bulk-single").prop("checked",!0):a.find(".grid-bulk-single").prop("checked",!1)}),a.find(".grid-bulk-single").change(function(){var b=jQuery(this),c=b.attr("data-id"),d=".grid-bulk-single[data-id="+c+"]";jQuery(this).is(":checked")?a.find(d).prop("checked",!0):(a.find(d).prop("checked",!1),a.find(".grid-bulk-all").prop("checked",!1))}),a.find(".grid-bulk select").change(function(){var b=jQuery(this).find(":selected"),c=b.attr("data-col"),d=jQuery(this).attr("popup"),e=[],f=a.find(".grid-bulk-single:checked");f.length>0?(jQuery("#"+d).find(".action").html(jQuery(this).find(":selected").text()),a.find(".grid-bulk-single:checked").each(function(a,b){var c=jQuery(this).attr("data-id");jQuery.inArray(c,e)<0&&e.push(c)}),jQuery("#"+d).find("input[name=action]").val(jQuery(this).val()),jQuery("#"+d).find("input[name=column]").val(c),jQuery("#"+d).find("input[name=target]").val(e.join(",")),showPopup("#"+d)):alert("Please select at least one row to apply this action.")}),a.find(".wrap-limits select").change(function(){var a=window.location.href,b=jQuery(this).val();"select"===b?(a=cmt.utils.data.removeParam(a,d.pageParam),a=cmt.utils.data.removeParam(a,d.pageLimitParam)):(a=cmt.utils.data.updateUrlParam(a,d.pageParam,1),a=cmt.utils.data.updateUrlParam(a,d.pageLimitParam,b)),window.location=a}),a.find(".trigger-layout-switch").click(function(){var b=jQuery(this);b.hasClass("grid-view-data")?(b.removeClass("grid-view-data "+d.cardIcon),b.addClass("grid-view-card "+d.listIcon),a.find(".grid-rows-wrap").fadeOut("fast"),a.find(".grid-cards-wrap").fadeIn("fast"),updateUserMeta&&updateUserMeta("gridLayout","card")):b.hasClass("grid-view-card")&&(b.removeClass("grid-view-card "+d.listIcon),b.addClass("grid-view-data "+d.cardIcon),a.find(".grid-cards-wrap").fadeOut("fast"),a.find(".grid-rows-wrap").fadeIn("fast"),updateUserMeta&&updateUserMeta("gridLayout","data"))}),a.find(".actions .action-generic").click(function(){var a=parseInt(jQuery(this).attr("target")),b=jQuery(this).attr("popup");if(a>0){var c=jQuery("#"+b),d=c.find("form"),e=jQuery(this).is("[generic]"),f=jQuery(this).attr("action"),g=f.replace(/\s+/g,"-").toLowerCase(),h=e?d.attr("action")+a:d.attr("action")+"/"+g+"?id="+a;d.attr("action",h),d.find(".action-generic").html(f),d.find(".element-generic").val(f),d.find(".element-action").val(g),showPopup("#"+b)}else alert("Please select valid row.")}),a.find(".grid-title .action-add").click(function(){var a=jQuery(this).attr("popup");showPopup("#"+a)}),a.find(".actions .action-pop").click(function(){var a=parseInt(jQuery(this).attr("target")),b=jQuery(this).attr("popup");if(a>0){var c=jQuery("#"+b),d=c.find("form").attr("action")+a;c.find("form").attr("action",d),showPopup("#"+b)}else alert("Please select valid row.")})}var d=a.extend({},a.fn.cmtGrid.defaults,b),e=this;e.each(function(){var b=a(this);c(b)})},a.fn.cmtGrid.defaults={cardIcon:"cmti cmti-grid",listIcon:"cmti cmti-list",pageParam:"page",pageLimitParam:"per-page"}}(jQuery),function(a){a.fn.cmtHeader=function(b){function c(a){e>d.minWidth&&window.addEventListener("scroll",function(b){var c=window.pageYOffset||document.documentElement.scrollTop,e=d.scrollDistance;c>e?(a.addClass("header-small"),a.hasClass("hidden")&&a.slideDown("slow")):(a.hasClass("header-small")&&!a.hasClass("header-small-ignore")&&a.removeClass("header-small"),a.hasClass("hidden")&&a.slideUp("false"))})}var d=a.extend({},a.fn.cmtHeader.defaults,b),e=window.innerWidth,f=this;f.each(function(){var b=a(this);c(b)})},a.fn.cmtHeader.defaults={minWidth:1024,scrollDistance:300}}(jQuery),function(a){a.fn.cmtIconPicker=function(b){function c(a){a.find(".choose-icon").click(function(){var b=jQuery(this);b.hasClass("disabled")||a.find(".picker-icon-sets").slideToggle("slow")}),a.find(".picker-icon-sets .picker-icon-wrap").click(function(){var b=jQuery(this),c=a.find(".picker-icon-sets"),d=b.find(".picker-icon"),e="picker-icon "+d.attr("icon"),f=a.find(".choose-icon");f=f.find(".picker-icon"),f.attr("class",e),a.find(".icon-field").val(d.attr("icon")),c.slideToggle("slow")})}var d=(a.extend({},a.fn.cmtIconPicker.defaults,b),this);d.each(function(){var b=a(this);c(b)})},a.fn.cmtIconPicker.defaults={}}(jQuery),function(a){a.fn.latLongPicker=function(b){function c(a){if(window.google){d(a)}}function d(b){var c=a.extend(!0,{},j.mapOptions),d=b.find(".google-map").get(0),f=b.find(".latitude"),g=b.find(".longitude"),h=b.find(".zoom");f.length>0&&g.length>0&&(f=parseFloat(f.val()),g=parseFloat(g.val()),h=parseInt(h.val()),a.isNumeric(f)||a.isNumeric(g)||(f=j.latitude,g=j.longitude,b.find(".latitude").val(f),b.find(".longitude").val(g)),a.isNumeric(h)&&(c.zoom=h)),null==c.mapTypeId&&(c.mapTypeId=google.maps.MapTypeId.ROADMAP),c.center=new google.maps.LatLng(f,g);var k=new google.maps.Map(d,c),l=e(b,k,c);if(j.geocoder){var m=new google.maps.Geocoder;b.find(".search-box").change(function(){var c=a(this).val();m.geocode({address:c},function(a,c){if(c==google.maps.GeocoderStatus.OK){var d=a[0].geometry.location;i(b,k,d,l)}})})}if(j.places){var n=new google.maps.places.PlacesService(k);b.find(".search-box").change(function(){var c=a(this).val(),d={query:c};n.textSearch(d,function(a,c){if(c==google.maps.places.PlacesServiceStatus.OK){var d=a[0].geometry.location;i(b,k,d,l)}})})}return b.find(".search-ll").change(function(){var c=a(this).val();c=c.split(",");var d=parseFloat(c[0]),e=parseFloat(c[1]),f={lat:d,lng:e};i(b,k,f,l)}),k}function e(a,b,c){var d=new google.maps.Marker({position:c.center,map:b,title:j.markerTitle,draggable:!0});return google.maps.event.addListener(d,"dragend",function(c){f(a,b,d.position)}),google.maps.event.addListener(b,"dblclick",function(c){g(a,b,c.latLng,d)}),google.maps.event.addListener(b,"click",function(c){g(a,b,c.latLng,d)}),google.maps.event.addListener(b,"zoom_changed",function(){h(a,b)}),d}function f(a,b,c){a.find(".latitude").val(c.lat),a.find(".longitude").val(c.lng),h(a,b)}function g(a,b,c,d){f(a,b,c),d.setPosition(c)}function h(a,b){a.find(".zoom").val(b.getZoom())}function i(a,b,c,d){f(a,b,c),b.setCenter(c),d.setPosition(c)}var j=a.extend({},a.fn.latLongPicker.defaults,b),k=this;k.each(function(){var b=a(this);c(b)})},a.fn.latLongPicker.defaults={map:null,latitude:0,longitude:0,markerTitle:"My Location",geocoder:!1,places:!0,mapOptions:{zoom:3,mapTypeId:null,mapTypeControl:!1,zoomControlOptions:!0,disableDoubleClickZoom:!0}}}(jQuery),function(a){a.fn.cmtLoginRegister=function(b){function c(a){var b=a.find(".box-login"),c=a.find(".box-signup"),d=a.find(".box-forgot");a.find(".btn-login").click(function(a){a.preventDefault(),b.is(":visible")?b.slideUp("fast"):(c.slideUp("fast"),d.slideUp("fast"),b.slideDown("slow"))}),a.find(".btn-forgot").click(function(a){a.preventDefault(),d.is(":visible")?d.slideUp("fast"):(c.slideUp("fast"),b.slideUp("fast"),d.slideDown("slow"))}),a.find(".btn-signup").click(function(a){a.preventDefault(),c.is(":visible")?c.slideUp("fast"):(b.slideUp("fast"),d.slideUp("fast"),c.slideDown("slow"))})}var d=(a.extend({},a.fn.cmtLoginRegister.defaults,b),this);d.each(function(){var b=a(this);c(b)})},a.fn.cmtLoginRegister.defaults={}}(jQuery),function(a){a.fn.cmtCollapsibleMenu=function(b){function c(a){a.find(".collapsible-tab.has-children").click(function(){var a=jQuery(this),b=a.children(".tab-content");a.hasClass("active")||(a.hasClass("expanded")?(a.removeClass("expanded"),b.slideUp("slow")):(a.addClass("expanded"),b.slideDown("slow")))})}var d=(a.extend({},a.fn.cmtCollapsibleMenu.defaults,b),this);d.each(function(){var b=a(this);c(b)})},a.fn.cmtCollapsibleMenu.defaults={}}(jQuery),function(a){a.fn.cmtSlidingMenu=function(b){function c(b){if(d.mainMenu){var c=a(document).height(),e=a(window).width();b.css({top:"0px",left:"0px",height:c,width:e})}null!=d.showTrigger&&a(d.showTrigger).click(function(){b.fadeIn();var a=b.find(".vnav-slider");"left"==d.position?a.animate({left:0}):"right"==d.position&&a.animate({right:0})}),null!=d.hideTrigger&&a(d.hideTrigger).click(function(){b.fadeOut();var a=b.find(".vnav-slider");"left"==d.position?a.animate({left:-a.width()}):"right"==d.position&&a.animate({right:-a.width()})}),b.find(".btn-close").click(function(){b.fadeOut();var a=b.find(".vnav-slider");"left"==d.position?a.animate({left:-a.width()}):"right"==d.position&&a.animate({right:-a.width()})});var f=b.find(".popup-bkg-filler");f.length>0&&(f.css({top:"0px",left:"0px",height:c,width:e}),f.click(function(){b.fadeOut("fast")}))}var d=a.extend({},a.fn.cmtSlidingMenu.defaults,b),e=this;e.each(function(){var b=a(this);c(b)})},a.fn.cmtSlidingMenu.defaults={position:"left",showTrigger:null,hideTrigger:null,mainMenu:!1}}(jQuery),function(a){a.fn.cmtPopoutGroup=function(b){function c(a){var b=a.find(".popout-trigger");b.click(function(){b.removeClass("active"),jQuery(this).addClass("active");var c="#"+jQuery(this).attr("popout"),e=jQuery(c);if(e.is(":visible"))switch(jQuery(this).removeClass("active"),d.animation){case"down":e.slideUp()}else switch(a.find(".popout").hide(),d.animation){case"down":e.slideDown()}})}var d=a.extend({},a.fn.cmtPopoutGroup.defaults,b),e=this;e.each(function(){var b=a(this);c(b)})},a.fn.cmtPopoutGroup.defaults={animation:"down"}}(jQuery),function(a){a.fn.cmtPopup=function(b){function c(a){var b=a.children(".popup-data");if(b.children(".popup-close").click(function(){a.fadeOut("slow")}),d.modal){a.appendTo("body"),a.css({top:"0px",left:"0px",height:f,width:h});var c=a.find(".popup-screen");c.length>0&&c.css({top:"0px",left:"0px",height:g,width:h});var e=a.find(".popup-screen-listener");e.length>0&&(e.css({top:"0px",left:"0px",height:g,width:h}),e.click(function(){a.fadeOut("fast")})),a.show();var i=b.height(),j=b.width();a.hide(),b.css({top:g/2-i/2,left:h/2-j/2})}}var d=a.extend({},a.fn.cmtPopup.defaults,b),e=this,f=a(document).height(),g=a(window).height(),h=a(window).width();e.each(function(){var b=a(this);c(b)})},a.fn.cmtPopup.defaults={modal:!0}}(jQuery),function(a){a.fn.cmtRate=function(b){function c(b){var c=b.find(".star").length,f=[],g=[],h=[],i=1==b.find(".selected").length?parseInt(b.find(".selected").attr("star")):0,j=b.hasClass("disabled"),k=b.hasClass("read-only");b.find(".star").each(function(){var c=a(this),d=parseInt(c.attr("star"));i>0&&d>=i?(c.html('<i class="'+e.base+" "+e.filled+'"></i>'),c.css("color",e.filledColor)):i==d&&e.message?message.addClass("selected"):(c.html('<i class="'+e.base+" "+e.empty+'"></i>'),c.css("color",e.emptyColor)),j?c.css("color",e.disabledColor):k?c.css("color",e.readonlyColor):(f.push(c),g.push(c.children("i")),e.message&&h.push(b.find("span[star-message="+d+"]")))}),j||k||(b.find(".star").mouseover(function(){var e=parseInt(a(this).attr("star"));d(b,c,e,f,g,h,0)}),b.find(".star").mouseout(function(){d(b,c,i,f,g,h,1)}),b.find(".star").click(function(){var e=parseInt(a(this).attr("star"));i=e,b.find("input").val(jQuery(this).attr("star")),b.find(".star").removeClass("selected"),a(this).addClass("selected"),d(b,c,e,f,g,h,2)}))}function d(a,b,c,d,f,g,h){e.message&&a.find(".star-message").removeClass("selected");for(var i=1;b>=i;i++){var j=d[i-1],k=f[i-1],l=g[i-1];if(c>=i){switch(h){case 0:j.css("color",e.hoverColor);break;case 1:case 2:j.css("color",e.filledColor)}k.removeClass(e.empty),k.addClass(e.filled),i==c&&e.message&&l.addClass("selected")}else j.css("color",e.emptyColor),k.removeClass(e.filled),k.addClass(e.empty)}}var e=a.extend({},a.fn.cmtRate.defaults,b),f=this;f.each(function(){var b=a(this);c(b)})},a.fn.cmtRate.defaults={base:"fa",empty:"fa-star-o",filled:"fa-star",emptyColor:"black",filledColor:"#A5D75A",hoverColor:"#EF9300",disabledColor:"#7F7F7F",readonlyColor:"#A5D75A",message:!0}}(jQuery),function(a){a.fn.cmtSelect=function(b){function c(b){var c=b.children("option:selected");b.wrap("<div></div>");var e=b.parent();if(d.copyId){var f=b.attr("id");null!=f&&f.length>0&&(b.attr("id",null),e.attr("id",f))}e.addClass("cmt-select-wrap"),null!=d.wrapperClass&&e.addClass(d.wrapperClass);var g='<span class="s-icon">';null!=d.iconClass&&(g='<span class="s-icon '+d.iconClass+'">'),g+=null!=d.iconHtml?d.iconHtml+"</span>":"</span>";var h="<div class='cmt-select'><div class='cmt-selected'><span class='s-text'>"+c.html()+"</span>"+g+"</div><ul class='cmt-select-list'>";if(d.copyOptionClass){var c=b.find(":selected");if(1==c.length){var i=c.attr("class");h="<div class='cmt-select'><div class='cmt-selected'><span class='s-text "+i+"'>"+c.html()+"</span>"+g+"</div><ul class='cmt-select-list'>"}}b.find("option").each(function(a){if(d.copyOptionClass){var b=jQuery(this).attr("class");h+='<li class="'+b+'" data-value="'+jQuery(this).val()+'">'+jQuery(this).html()+"</li>"}else h+='<li data-value="'+jQuery(this).val()+'">'+jQuery(this).html()+"</li>"}),h+="</ul></div>",e.append(h);var j=(e.children(".cmt-select"),e.children(".cmt-select").children(".cmt-selected")),k=e.children(".cmt-select").children(".cmt-select-list");k.hide();var l=b.attr("disabled");"disabled"==l||l?j.addClass("disabled"):(j.click(function(a){var b=k.is(":visible");k.hide(),jQuery(document).unbind("keyup"),b||(k.show(),jQuery(document).on("keyup",function(a){var b=String.fromCharCode(a.keyCode);k.children("li").each(function(){var a=jQuery(this);return a.html().substr(0,1).toUpperCase()==b?(k.animate({scrollTop:a.offset().top-k.offset().top+k.scrollTop()}),!1):void 0})})),a.stopPropagation()}),k.children("li").click(function(){var a=jQuery(this),b=a.parents().eq(1);b.children(".cmt-selected").children(".s-text").html(a.html()),b.parent().children("select").val(a.attr("data-value")).change(),k.hide(),jQuery(document).unbind("keyup")}),a(document).on("click",function(b){0===a(b.target).closest(k).length&&(k.hide(),jQuery(document).unbind("keyup"))}))}var d=a.extend({},a.fn.cmtSelect.defaults,b),e=this;e.each(function(){var b=a(this);c(b)})},a.fn.cmtSelect.defaults={multi:!1,copyId:!1,copyOptionClass:!1,wrapperClass:null,iconClass:null,iconHtml:null},a.fn.cmtSelect.resetSelect=function(a,b){var c=a.find("select");c.html(b);var d=c.children("option:selected"),e=a.find(".cmt-select-list"),f=a.find(".cmt-selected").children(".s-text"),g="";c.children("option").each(function(a){g+='<li data-value="'+jQuery(this).val()+'">'+jQuery(this).html()+"</li>"}),f.html(d.html()),e.html(g),e.children("li").click(function(){var a=jQuery(this);a.parents().eq(1);f.html(a.html()),c.val(a.attr("data-value")).change(),e.hide(),jQuery(document).unbind("keyup")})},a.fn.cmtSelect.setValue=function(a,b){var c=a.find("select");c.val(b);var d=c.children("option:selected"),e=a.find(".cmt-selected").children(".s-text");e.html(d.html())}}(jQuery),function(a){a.fn.cmtMultiSelect=function(b){function c(b){var c='<span class="s-icon">';null!=d.iconClass&&(c='<span class="s-icon '+d.iconClass+'">'),c+=null!=d.iconHtml?d.iconHtml+"</span>":"</span>";var e='<div class="cmt-selected"><span class="s-text">'+b.attr("title")+"</span>"+c+"</div>";b.prepend(e);var f=b.find(".cmt-select-list");f.hide();var g=b.attr("disabled");"disabled"==g||g?b.addClass("disabled"):(b.find(".cmt-selected").click(function(a){f.is(":visible")?f.slideUp():(f.slideDown("slow"),jQuery(document).on("keyup",function(a){var b=String.fromCharCode(a.keyCode);f.children("li").each(function(){var a=jQuery(this);return a.html().substr(0,1).toUpperCase()==b?(f.animate({scrollTop:a.offset().top-f.offset().top+f.scrollTop()}),!1):void 0})})),a.stopPropagation()}),a(document).on("click",function(b){0===a(b.target).closest(f).length&&(f.slideUp(),jQuery(document).unbind("keyup"))}))}var d=a.extend({},a.fn.cmtSelect.defaults,b),e=this;e.each(function(){var b=a(this);c(b)})},a.fn.cmtSelect.defaults={wrapperClass:null,iconClass:null,iconHtml:null}}(jQuery),function(a){a.fn.cmtSlider=function(b){function c(a){d(a),e(a),f(a)}function d(b){b.children().each(function(){var b=a(this);b.addClass("cmt-slider-slide")});var c='<div class="cmt-slider-slides-wrap"><div class="cmt-slider-slides">'+b.html()+"</div></div>";c+='<div class="cmt-slider-control cmt-slider-control-left"></div><div class="cmt-slider-control cmt-slider-control-right"></div>',b.html(c)}function e(b){var c=b.find(".cmt-slider-slides"),d=b.find(".cmt-slider-slide"),e=d.outerWidth(),f=d.length,h=0;c.width(e*f),d.each(function(c){var d=a(this);d.css("left",h),d.attr("slide",c),h+=e,g(b,d)}),c.width()<b.width()&&null!==m.smallerContent&&m.smallerContent(b,c)}function f(a){var b=a.find(".cmt-slider-slides"),c=a.find(".cmt-slider-control-left"),d=a.find(".cmt-slider-control-right");if(b.width()<a.width())return c.hide(),void d.hide();var e=m.lControlContent,f=m.rControlContent;c.html(e),d.html(f),m.circular||(c.hide(),d.show()),c.click(function(){m.circular?j(a):l(a)}),d.click(function(){m.circular?i(a):k(a)})}function g(a,b){null!==m.onSlideClick&&(b.unbind("click"),b.click(function(){m.onSlideClick(a,b,b.attr("slide"))}))}function h(b){var c=b.find(".cmt-slider-slide"),d=c.width(),e=0,f=b.find(".cmt-slider-slides");f.css({left:"0px",right:""}),c.each(function(){a(this).css({left:e+"px",right:""}),e+=d})}function i(a){var b=a.find(".cmt-slider-slide"),c=b.first(),d=c.width(),e=a.find(".cmt-slider-slides");null!==m.preSlideChange&&m.preSlideChange(a,c,c.attr("slide")),e.animate({left:-d},{duration:500,complete:function(){var b=a.find(".cmt-slider-slide"),c=b.first();
c.insertAfter(b.eq(b.length-1)),c.css("right",-d),h(a)}}),c=b.first(),null!==m.postSlideChange&&m.postSlideChange(a,c,c.attr("slide"))}function j(b){var c=b.find(".cmt-slider-slide"),d=c.first(),e=d.width(),f=b.find(".cmt-slider-slides");null!==m.preSlideChange&&m.preSlideChange(b,d,d.attr("slide"));var g=c.last();g.insertBefore(c.eq(0)),g.css("left",-e),f.animate({left:e},{duration:500,complete:function(){var b=a(this).parent();h(b)}}),d=c.first(),null!==m.postSlideChange&&m.postSlideChange(b,d,d.attr("slide"))}function k(a){var b=a.find(".cmt-slider-control-left"),c=a.find(".cmt-slider-control-right"),d=a.find(".cmt-slider-slide"),e=d.first(),f=e.outerWidth(),g=a.find(".cmt-slider-slides"),h=a.outerWidth(),i=g.outerWidth(),j=g.position().left,k=f,l=j-k,m=i+l;m>h-k&&g.animate({left:l},{duration:500,complete:function(){var a=g.outerWidth(),d=g.position().left,e=d-k,f=a+e;h-k>f&&c.hide(),b.is(":hidden")&&b.fadeIn("fast")}})}function l(a){var b=a.find(".cmt-slider-control-left"),c=a.find(".cmt-slider-control-right"),d=a.find(".cmt-slider-slide"),e=d.first(),f=e.outerWidth(),g=a.find(".cmt-slider-slides"),h=g.position().left,i=f,j=h;-(f/2)>j?(j=h+i,g.animate({left:j},{duration:500,complete:function(){var a=g.position().left;a>-(f/2)&&(b.hide(),g.position({at:"left top"})),c.is(":hidden")&&c.fadeIn("fast")}})):(b.hide(),g.position({at:"left top"}))}var m=a.extend({},a.fn.cmtSlider.defaults,b),n=this;n.each(function(){var b=a(this);c(b)}),a(window).resize(function(){n.each(function(){var b=a(this);e(b)})})},a.fn.cmtSlider.defaults={lControlContent:null,rControlContent:null,smallerContent:null,onSlideClick:null,preSlideChange:null,postSlideChange:null,circular:!0}}(jQuery),function(a){a.fn.cmtSmoothScroll=function(b){function c(b){b.on("click",function(b){var c=this.hash;if(null!=c&&c.length>0){b.preventDefault();var d=a(c);a("html, body").stop().animate({scrollTop:d.offset().top},900,"swing",function(){window.location.hash=c})}})}var d=(a.extend({},a.fn.cmtSmoothScroll.defaults,b),this);d.each(function(){var b=a(this);c(b)})},a.fn.cmtSmoothScroll.defaults={}}(jQuery),function(a){a.fn.cmtTabs=function(b){function c(a){var b=a.find(".tab-link"),c=a.find(".tab-content");jQuery(b[0]).addClass("active"),jQuery(c[0]).addClass("active"),jQuery(c[0]).fadeIn("slow"),b.click(function(){var a=jQuery(this).attr("target");b.removeClass("active"),c.removeClass("active"),c.hide(),jQuery(this).addClass("active"),jQuery(a).addClass("active"),jQuery(a).fadeIn("slow")})}var d=(a.extend({},a.fn.cmtTabs.defaults,b),this);d.each(function(){var b=a(this);c(b)})},a.fn.cmtTabs.defaults={}}(jQuery),cmt.api={},cmt.api.Root=function(a){this.apps=[],this.activeApps=[]},cmt.api.Root.prototype.mapApplication=function(a,b){void 0==this.apps[a]&&(this.apps[a]=b)},cmt.api.Root.prototype.getApplication=function(a,b){if(b="undefined"!=typeof b?b:{},void 0==this.apps[a])throw"Application with alias "+a+" is not registered.";if(void 0==this.activeApps[a]){var c=cmt.utils.object.strToObject(this.apps[a]);c.init(b),this.activeApps[a]=c}return this.activeApps[a]},cmt.api.Root.prototype.setApplication=function(a,b){void 0==this.activeApps[a]&&(this.activeApps[a]=b)},cmt.api.Root.prototype.registerApplication=function(a,b,c){return this.mapApplication(a,b),this.getApplication(a,c)},cmt.api.root=new cmt.api.Root,cmt.api.Application=function(a){this.config={json:!1,basePath:null,csrfGet:!1,errorClass:".error",warnClass:".warn",messageClass:".message",spinnerClass:".spinner"},jQuery.extend(this.config,a);var b=cmt.api.Application.CONTROLLER_DEFAULT;this.controllers=[],this.controllers[b]="cmt.api.controllers.RequestController",this.activeControllers=[]},cmt.api.Application.CONTROLLER_DEFAULT="default",cmt.api.Application.ACTION_DEFAULT="default",cmt.api.Application.STATIC_CONTROLLER="cmt-controller",cmt.api.Application.STATIC_ACTION="cmt-action",cmt.api.Application.STATIC_CUSTOM="cmt-custom",cmt.api.Application.STATIC_ID="id",cmt.api.Application.STATIC_KEEP="cmt-keep",cmt.api.Application.STATIC_ERROR="cmt-error",cmt.api.Application.STATIC_CLICK=".cmt-click",cmt.api.Application.STATIC_CHANGE=".cmt-change",cmt.api.Application.STATIC_KEY_UP=".cmt-key-up",cmt.api.Application.STATIC_BLUR=".cmt-blur",cmt.api.Application.prototype.init=function(a){jQuery.extend(this.config,a)},cmt.api.Application.prototype.mapController=function(a,b){void 0==this.controllers[a]&&(this.controllers[a]=b)},cmt.api.Application.prototype.getController=function(a,b,c){if(c="undefined"!=typeof c?c:{},b="undefined"!=typeof b?b:!1,void 0==this.controllers[a])throw"Controller with alias "+a+" is not registered.";if(b){var d=cmt.utils.object.strToObject(this.controllers[a]);return d.init(c),d}if(void 0==this.activeControllers[a]){var d=cmt.utils.object.strToObject(this.controllers[a]);d.init(c),this.activeControllers[a]=d}return this.activeControllers[a]},cmt.api.Application.prototype.setController=function(a,b){void 0==this.activeControllers[a]&&(this.activeControllers[a]=b)},cmt.api.Application.prototype.registerController=function(a,b,c){return c="undefined"!=typeof c?c:{},this.addController(a,b),this.getController(a,!1,c)},cmt.api.Application.prototype.findController=function(a,b){try{return this.getController(a,b)}catch(c){if(console.log(c),console.log("Falling back to default controller."),void 0!==this.controllers[cmt.api.Application.CONTROLLER_DEFAULT])return this.findController(cmt.api.Application.CONTROLLER_DEFAULT)}},cmt.api.controllers=cmt.api.controllers||{},cmt.api.utils=cmt.api.utils||{},cmt.api.controllers.BaseController=function(a){},cmt.api.controllers.BaseController.prototype.init=function(a){},cmt.api.controllers.ActionController=function(a){this.requestData=null},cmt.api.controllers.ActionController.inherits(cmt.api.controllers.BaseController),cmt.api.controllers.ActionController.prototype.init=function(a){console.log("Initialised default controller.")},cmt.api.controllers.ActionController.prototype["default"]=function(){return console.log("Executing default action."),!0},cmt.api.controllers.ActionController.prototype.defaultActionPre=function(){return console.log("Pre processing default action."),!0},cmt.api.controllers.ActionController.prototype.defaultActionSuccess=function(a){console.log("Processing success for default action.")},cmt.api.controllers.ActionController.prototype.defaultActionFailure=function(a){console.log("Processing failure for default action.")},cmt.api.controllers.GridController=function(a){this.endpoint=null,this.model=null,this.collection=null,this.rowTemplate=null,this.cardTemplate=null,this.pages=0,this.pageLimit=0,this.lastPage=0},cmt.api.controllers.GridController.inherits(cmt.api.controllers.BaseController),cmt.api.controllers.GridController.prototype.init=function(a){console.log("Initialised grid controller.")},cmt.api.controllers.GridController.prototype.allActionPre=function(){return console.log("Pre processing all action."),!0},cmt.api.controllers.GridController.prototype.allActionSuccess=function(a){console.log("Processing success for all action.")},cmt.api.controllers.GridController.prototype.allActionFailure=function(a){console.log("Processing failure for all action.")},cmt.api.controllers.GridController.prototype.createActionPre=function(){return console.log("Pre processing create action."),!0},cmt.api.controllers.GridController.prototype.createActionSuccess=function(a){console.log("Processing success for create action.")},cmt.api.controllers.GridController.prototype.createActionFailure=function(a){console.log("Processing failure for create action.")},cmt.api.controllers.GridController.prototype.updateActionPre=function(){return console.log("Pre processing update action."),!0},cmt.api.controllers.GridController.prototype.updateActionSuccess=function(a){console.log("Processing success for update action.")},cmt.api.controllers.GridController.prototype.updateActionFailure=function(a){console.log("Processing failure for update action.")},cmt.api.controllers.GridController.prototype.deleteActionPre=function(){return console.log("Pre processing delete action."),!0},cmt.api.controllers.GridController.prototype.deleteActionSuccess=function(a){console.log("Processing success for delete action.")},cmt.api.controllers.GridController.prototype.deleteActionFailure=function(a){console.log("Processing failure for delete action.")},cmt.api.controllers.RequestController=function(a){this.requestTrigger=null,this.requestForm=null,this.requestData=null,this.currentRequest=null,this.singleRequest=!1},cmt.api.controllers.RequestController.inherits(cmt.api.controllers.BaseController),cmt.api.controllers.RequestController.prototype.init=function(a){console.log("Initialised default controller.")},cmt.api.controllers.RequestController.prototype.defaultActionPre=function(a){return console.log("Pre processing default action."),!0},cmt.api.controllers.RequestController.prototype.defaultActionSuccess=function(a,b){console.log("Processing success for default action.")},cmt.api.controllers.RequestController.prototype.defaultActionFailure=function(a,b){console.log("Processing failure for default action.")},cmt.api.controllers.RestController=function(a){this.endpoint=null,this.model=null,this.collection=null,this.pages=0,this.pageLimit=0,this.lastPage=0},cmt.api.controllers.RestController.inherits(cmt.api.controllers.BaseController),cmt.api.controllers.RestController.prototype.init=function(a){console.log("Initialised rest controller.")},cmt.api.controllers.RestController.prototype.getActionPre=function(){return console.log("Pre processing get action."),!0},cmt.api.controllers.RestController.prototype.getActionSuccess=function(a){console.log("Processing success for get action.")},cmt.api.controllers.RestController.prototype.getActionFailure=function(a){console.log("Processing failure for get action.")},cmt.api.controllers.RestController.prototype.postActionPre=function(){return console.log("Pre processing post action."),!0},cmt.api.controllers.RestController.prototype.postActionSuccess=function(a){console.log("Processing success for post action.")},cmt.api.controllers.RestController.prototype.postActionFailure=function(a){console.log("Processing failure for post action.")},cmt.api.controllers.RestController.prototype.putActionPre=function(){return console.log("Pre processing put action."),!0},cmt.api.controllers.RestController.prototype.putActionSuccess=function(a){console.log("Processing success for put action.")},cmt.api.controllers.RestController.prototype.putActionFailure=function(a){console.log("Processing failure for put action.")},cmt.api.controllers.RestController.prototype.deleteActionPre=function(){return console.log("Pre processing delete action."),!0},cmt.api.controllers.RestController.prototype.deleteActionSuccess=function(a){console.log("Processing success for delete action.")},cmt.api.controllers.RestController.prototype.deleteActionFailure=function(a){console.log("Processing failure for delete action.")},cmt.api.utils.request={register:function(a,b){b.each(function(){var b=jQuery(this);b.is("form")&&b.submit(function(c){c.preventDefault(),cmt.api.utils.request.trigger(a,b,!0,null)});var c=b.find(cmt.api.Application.STATIC_CLICK);c.length>0&&c.click(function(c){c.preventDefault();var d=jQuery(this);if(d.is("[target-app]")){var e=cmt.api.root.getApplication(d.attr("target-app")),f=d.closest("[cmt-app="+d.attr("target-app")+"]");cmt.api.utils.request.trigger(e,f,!1,jQuery(this))}else cmt.api.utils.request.trigger(a,b,!1,jQuery(this))});var d=b.find(cmt.api.Application.STATIC_CHANGE);d.length>0&&d.change(function(){var c=jQuery(this);if(c.is("[target-app]")){var d=cmt.api.root.getApplication(c.attr("target-app")),e=c.closest("[cmt-app="+c.attr("target-app")+"]");cmt.api.utils.request.trigger(d,e,!1,jQuery(this))}else cmt.api.utils.request.trigger(a,b,!1,jQuery(this))});var e=b.find(cmt.api.Application.STATIC_KEY_UP);e.length>0&&e.keyup(function(){var c=jQuery(this);if(c.is("[target-app]")){var d=cmt.api.root.getApplication(c.attr("target-app")),e=c.closest("[cmt-app="+c.attr("target-app")+"]");cmt.api.utils.request.trigger(d,e,!1,jQuery(this))}else cmt.api.utils.request.trigger(a,b,!1,jQuery(this))});var f=b.find(cmt.api.Application.STATIC_BLUR);f.length>0&&f.blur(function(){var c=jQuery(this);if(c.is("[target-app]")){var d=cmt.api.root.getApplication(c.attr("target-app")),e=c.closest("[cmt-app="+c.attr("target-app")+"]");cmt.api.utils.request.trigger(d,e,!1,jQuery(this))}else cmt.api.utils.request.trigger(a,b,!1,jQuery(this))})})},trigger:function(a,b,c,d){var e=b.attr(cmt.api.Application.STATIC_CONTROLLER),f=b.attr(cmt.api.Application.STATIC_ACTION);null==e&&(e=cmt.api.Application.CONTROLLER_DEFAULT),null==f&&(f=cmt.api.Application.ACTION_DEFAULT);var g=a.findController(e);g.requestTrigger=d,c?a.config.json?cmt.api.utils.request.handleJsonForm(a,b,g,f):cmt.api.utils.request.handleDataForm(a,b,g,f):cmt.api.utils.request.handleRequest(a,b,g,f)},handleJsonForm:function(a,b,c,d){if(cmt.api.utils.request.preProcessRequest(a,b,c,d)){var e=c.requestData,f=b.attr("method");if(b.is("["+cmt.api.Application.STATIC_CUSTOM+"]"))e=cmt.utils.data.appendCsrf(e);else{var g=null!=c.requestForm?c.requestForm:b;e=null==f||"get"!=f.toLowerCase()||a.config.csrfGet?cmt.utils.data.formToJson(g):cmt.utils.data.formToJson(g,!1)}cmt.api.utils.request.processRequest(a,b,c,d,e)}return!1},handleDataForm:function(a,b,c,d){if(cmt.api.utils.request.preProcessRequest(a,b,c,d)){var e=c.requestData,f=b.attr("method");if(b.is("["+cmt.api.Application.STATIC_CUSTOM+"]"))e=cmt.utils.data.appendCsrf(e);else{var g=null!=c.requestForm?c.requestForm:b;e=null==f||"get"!=f.toLowerCase()||a.config.csrfGet?cmt.utils.data.serialiseForm(g):cmt.utils.data.serialiseForm(g,!1)}cmt.api.utils.request.processRequest(a,b,c,d,e)}return!1},handleRequest:function(a,b,c,d){if(cmt.api.utils.request.preProcessRequest(a,b,c,d)){var e=c.requestData,f=b.attr("method");if(b.is("["+cmt.api.Application.STATIC_CUSTOM+"]"))e=cmt.utils.data.appendCsrf(e);else{var g=null!=c.requestForm?c.requestForm:b;e=null==f||"get"!=f.toLowerCase()||a.config.csrfGet?cmt.utils.data.serialiseElement(g):cmt.utils.data.serialiseElement(g,!1)}cmt.api.utils.request.processRequest(a,b,c,d,e)}return!1},preProcessRequest:function(a,b,c,d){var e=d+"ActionPre",f=null!=c.requestForm?c.requestForm:b;return f.find(a.config.messageClass).css("display","none"),f.find(a.config.warnClass).css("display","none"),f.find(a.config.errorClass).css("display","none"),"undefined"==typeof c[e]||c[e](b)?(b.find(a.config.spinnerClass).css("display","inline-block"),!0):!1},processRequest:function(a,b,c,d,e){var f="post",g=b.attr("action");if(b.attr("method")&&(f=b.attr("method")),null!=a.config.basePath&&(g=a.config.basePath+g),c.singleRequest&&null!=c.currentRequest&&(c.currentRequest=c.currentRequest.abort(),c.currentRequest=null),a.config.json){var h=jQuery.ajax({type:f,url:g,data:e,dataType:"JSON",contentType:"application/json;charset=UTF-8",success:function(e,f,g){cmt.api.utils.request.processResponse(a,b,c,d,e)}});c.singleRequest&&(c.currentRequest=h)}else{var h=jQuery.ajax({type:f,url:g,data:e,dataType:"JSON",success:function(e,f,g){cmt.api.utils.request.processResponse(a,b,c,d,e)}});c.singleRequest&&(c.currentRequest=h)}},processResponse:function(a,b,c,d,e){var f=e.result,g=e.errors,h=null!=c.requestForm?c.requestForm:b;if(1==f)b.is("["+cmt.api.Application.STATIC_KEEP+"]")||(h.find(' input[type="text"]').val(""),h.find(' input[type="password"]').val(""),h.find(" textarea").val("")),h.find(a.config.errorClass).css("display","none");else if(0==f)for(var i in g){var j=i,k=g[i],l=h.find(" span["+cmt.api.Application.STATIC_ERROR+'="'+j+'"]');l.html(k),l.css("display","inline-block")}cmt.api.utils.request.postProcessResponse(a,b,c,d,e)},postProcessResponse:function(a,b,c,d,e){var f=e.result,g=null,h=e.message,i=d+"ActionSuccess",j=d+"ActionFailure";1==f?g=b.find(a.config.messageClass+".success"):0==f&&(g=b.find(a.config.messageClass+".error")),g.html(h),g.css("display","inline-block"),b.find(a.config.spinnerClass).hide(),1==f&&"undefined"!=typeof c[i]?c[i](b,e):0==f&&"undefined"!=typeof c[j]&&c[j](b,e)}};